<!-- udacimak v1.4.4 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   Two-Asset Portfolio Optimization
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      Portfolio Optimization
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. Intro.html">
       01. Intro
      </a>
     </li>
     <li class="">
      <a href="02. What is Optimization.html">
       02. What is Optimization?
      </a>
     </li>
     <li class="">
      <a href="03. Optimization with Constraints.html">
       03. Optimization with Constraints
      </a>
     </li>
     <li class="">
      <a href="04. Two-Asset Portfolio Optimization.html">
       04. Two-Asset Portfolio Optimization
      </a>
     </li>
     <li class="">
      <a href="05. Portfolio Optimization with 2 Stocks.html">
       05. Portfolio Optimization with 2 Stocks
      </a>
     </li>
     <li class="">
      <a href="06. Formulating Portfolio Optimization Problems.html">
       06. Formulating Portfolio Optimization Problems
      </a>
     </li>
     <li class="">
      <a href="07. cvxpy.html">
       07. cvxpy
      </a>
     </li>
     <li class="">
      <a href="08. Exercise cvxpy.html">
       08. Exercise: cvxpy
      </a>
     </li>
     <li class="">
      <a href="09. Exercise cvxpy advanced optimization.html">
       09. Exercise: cvxpy advanced optimization
      </a>
     </li>
     <li class="">
      <a href="10. Rebalancing a Portfolio.html">
       10. Rebalancing a Portfolio
      </a>
     </li>
     <li class="">
      <a href="11. Rebalancing Strategies.html">
       11. Rebalancing Strategies
      </a>
     </li>
     <li class="">
      <a href="12. Limitations of the Classical Approach.html">
       12. Limitations of the Classical Approach
      </a>
     </li>
     <li class="">
      <a href="13. Summary.html">
       13. Summary
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          04. Two-Asset Portfolio Optimization
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="derivation-of-optimal-weights-on-a-two-asset-portfolio">
          Derivation of Optimal Weights on a Two-Asset Portfolio
         </h2>
         <p>
          So how do we set up the portfolio optimization problem? In general, we know that we want high returns and low variance of returns, and that the weights on each asset in our portfolio should sum to 1.
         </p>
         <p>
          Let's again consider a portfolio a portfolio with 2 assets in it, Stock A and Stock B. We want to solve for the weight on each asset,
          <span class="mathquill ud-math">
           x_A
          </span>
          and
          <span class="mathquill ud-math">
           x_B
          </span>
          .
         </p>
         <p>
          Our objective function for this problem is the expression for the portfolio variance:
         </p>
         <div class="mathquill">
          (1)\;\sigma_P^2= x_A^2\sigma_A^2 + x_B^2\sigma_B^2 + 2x_Ax_B\sigma_A\sigma_B\rho_{r_Ar_B}.
         </div>
         <p>
          This is what we will seek to
          <em>
           minimize
          </em>
          .
         </p>
         <p>
          We've seen these quantities before, but let's just briefly recall what all these symbols mean:
          <br/>
          <span class="mathquill ud-math">
           \sigma_P^2
          </span>
          is the portfolio variance.
          <br/>
          <span class="mathquill ud-math">
           \sigma_A^2
          </span>
          is the variance of the return of Stock A.
          <br/>
          <span class="mathquill ud-math">
           \sigma_B^2
          </span>
          is the variance of the return of Stock B.
          <br/>
          <span class="mathquill ud-math">
           \rho_{r_Ar_B}
          </span>
          is the correlation between the returns of stocks A and B.
         </p>
         <p>
          Our only constraint is:
          <div class="mathquill">
           (2)\;x_A + x_B = 1
          </div>
         </p>
         <p>
          It turns out that this is a problem we can solve analytically. If we substitute
          <span class="mathquill ud-math">
           (2)
          </span>
          into
          <span class="mathquill ud-math">
           (1)
          </span>
          , we will get a function of a single variable:
         </p>
         <div class="mathquill">
          \sigma_P^2= x_A^2\sigma_A^2 + (1-x_A)^2\sigma_B^2 + 2x_A(1-x_A)\sigma_A\sigma_B\rho_{r_Ar_B}
         </div>
         <p>
          Now, let's take a breather and look at a plot of
          <span class="mathquill ud-math">
           \sigma_P^2
          </span>
          as a function of
          <span class="mathquill ud-math">
           x_A
          </span>
          , to get a sense of what the function looks like. Let's assume some values for the variables
          <span class="mathquill ud-math">
           \sigma_A
          </span>
          ,
          <span class="mathquill ud-math">
           \sigma_B
          </span>
          , and
          <span class="mathquill ud-math">
           \rho_{r_Ar_B}
          </span>
          .
         </p>
         <p>
          If,
          <span class="mathquill ud-math">
           \sigma_A = 0.1
          </span>
          ,
          <span class="mathquill ud-math">
           \sigma_B = 0.05
          </span>
          , and
          <span class="mathquill ud-math">
           \rho_{r_Ar_B} = 0.25
          </span>
          , then the plot looks like this:
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/two-asset-variance.jpeg"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          Cool, it's a parabola. So now we see that we are looking for the bottom of that parabola again.
         </p>
         <p>
          So, since this is a problem in only one variable,
          <span class="mathquill ud-math">
           x_A
          </span>
          , let's take the derivative with respect to
          <span class="mathquill ud-math">
           x_A
          </span>
          , and solve for the value of
          <span class="mathquill ud-math">
           x_A
          </span>
          that makes the resulting expression equal 0:
         </p>
         <div class="mathquill">
          \frac{\mathrm{d} (\sigma_P^2)}{\mathrm{d} x_A} = 0 = 2x_A\sigma_A^2 -2\sigma_B^2(1-x_A)+2\sigma_A\sigma_B\rho_{r_Ar_B}[-x_A + (1-x_A)]
         </div>
         <div class="mathquill">
          0 = 2x_A\sigma_A^2 +2\sigma_B^2x_A-2\sigma_B^2+2\sigma_A\sigma_B\rho_{r_Ar_B}[1-2x_A]
         </div>
         <div class="mathquill">
          x_A[2\sigma_A^2 + 2\sigma_B^2 - 4\sigma_A\sigma_B\rho_{r_Ar_B}] -2\sigma_B^2 + 2\sigma_A\sigma_B\rho_{r_Ar_B}=0
         </div>
         <div class="mathquill">
          x_A[\sigma_A^2 + \sigma_B^2 - 2\sigma_A\sigma_B\rho_{r_Ar_B}] =\sigma_B^2 - \sigma_A\sigma_B\rho_{r_Ar_B}
         </div>
         <div class="mathquill">
          x_A = \frac{\sigma_B^2 - \sigma_A\sigma_B\rho_{r_Ar_B}}{\sigma_A^2 + \sigma_B^2 - 2\sigma_A\sigma_B\rho_{r_Ar_B}}
         </div>
         <p>
          From the constraint condition,
          <span class="mathquill ud-math">
           (2)
          </span>
          , we have:
          <div class="mathquill">
           x_B = 1 - x_A
          </div>
         </p>
         <p>
          Now we know the portfolio weights. You can see that they are only dependent on the standard deviations of Stock A and B, and their covariance. If we wanted to know the expected portfolio mean, we only have to remember that it is the weighted sum of the individual portfolio means:
         </p>
         <div class="mathquill">
          \mu_P = \mu_Ax_A + \mu_Bx_B
         </div>
         <p>
          To be sure our solution is a
          <em>
           minimum
          </em>
          , we should check the second-order condition. We will leave this as an exercise to you.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="05. Portfolio Optimization with 2 Stocks.html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('04. Two-Asset Portfolio Optimization')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
