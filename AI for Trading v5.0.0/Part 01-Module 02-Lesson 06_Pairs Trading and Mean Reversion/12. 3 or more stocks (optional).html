<!-- udacimak v1.4.4 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   3 or more stocks (optional)
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      Pairs Trading and Mean Reversion
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. Intro.html">
       01. Intro
      </a>
     </li>
     <li class="">
      <a href="02. Mean Reversion.html">
       02. Mean Reversion
      </a>
     </li>
     <li class="">
      <a href="03. Pairs Trading.html">
       03. Pairs Trading
      </a>
     </li>
     <li class="">
      <a href="04. Finding Pairs to Trade.html">
       04. Finding Pairs to Trade
      </a>
     </li>
     <li class="">
      <a href="05. Quiz Identify Pairs to Trade.html">
       05. Quiz: Identify Pairs to Trade
      </a>
     </li>
     <li class="">
      <a href="06. Cointegration.html">
       06. Cointegration
      </a>
     </li>
     <li class="">
      <a href="07. ADF and roots.html">
       07. ADF and roots
      </a>
     </li>
     <li class="">
      <a href="08. Clustering Stocks.html">
       08. Clustering Stocks
      </a>
     </li>
     <li class="">
      <a href="09. Trade Pairs of Stocks.html">
       09. Trade Pairs of Stocks
      </a>
     </li>
     <li class="">
      <a href="10. Exercise finding pairs.html">
       10. Exercise: finding pairs
      </a>
     </li>
     <li class="">
      <a href="11. Variations of Pairs Trading and Mean Reversion Trading.html">
       11. Variations of Pairs Trading and Mean Reversion Trading
      </a>
     </li>
     <li class="">
      <a href="12. 3 or more stocks (optional).html">
       12. 3 or more stocks (optional)
      </a>
     </li>
     <li class="">
      <a href="13. Details of Johansen Test (optional).html">
       13. Details of Johansen Test (optional)
      </a>
     </li>
     <li class="">
      <a href="14. Summary.html">
       14. Summary
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          12. 3 or more stocks (optional)
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="extending-to-3-stocks-optional">
          Extending to 3 stocks (optional)
         </h2>
         <p>
          Now let’s extend this concept to three stocks.  If we analyze three stock series with the Johansen, we can determine whether all three stocks together have a cointegrated relationship, and that a linear combination of all three form a stationary series.  Note that for the purpose of cointegration trading we use the original price series, and do not convert them to log returns.  The Johansen test also lets us decide whether only two series are needed to form a stationary series, but for now, let’s assume that we find a trio of stocks that are cointegrated.
         </p>
         <p>
          The Johansen gives us three coefficients, one for each stock series.  We take the linear combination to get a spread.
         </p>
         <p>
          <span class="mathquill ud-math">
           w_1 \times stock_1 + w_2 \times stock_2 + w_3 \times stock_3 = spread
          </span>
         </p>
         <p>
          We get the historical average of the spread.  Then we check if the spread deviates significantly from that average.  For example, let’s say the spread increases significantly.  So we check whether each of the three individual series moved up or down significantly to result in the change in spread.  We short the series that are relatively high, and long the series that are relatively low.  To determine how much to long or short, we again use the weights that are given by the Johansen test
          <span class="mathquill ud-math">
           (w_1, w_2, w_3)
          </span>
          .
         </p>
         <p>
          For example, let’s say the spread has gotten larger.  Let’s also pretend that
          <span class="mathquill ud-math">
           w_1
          </span>
          is 0.5,
          <span class="mathquill ud-math">
           w_2
          </span>
          is 0.3, and
          <span class="mathquill ud-math">
           w_3
          </span>
          is -0.1.  Notice that the weights do not need to sum to 1.  We’ll long or short the number of shares for each stock in these proportions.  So for instance, if we traded 5 shares of
          <span class="mathquill ud-math">
           stock_1
          </span>
          , we’ll trade 3 shares of
          <span class="mathquill ud-math">
           stock_2
          </span>
          , and one share of
          <span class="mathquill ud-math">
           stock_3
          </span>
          .
         </p>
         <p>
          If we notice that
          <span class="mathquill ud-math">
           stock_1
          </span>
          is higher than normal,
          <span class="mathquill ud-math">
           stock_2
          </span>
          is lower than normal, and
          <span class="mathquill ud-math">
           stock_3
          </span>
          is lower than normal, then let’s see whether we long or short a stock, and by how much.
         </p>
         <p>
          Since
          <span class="mathquill ud-math">
           stock_1
          </span>
          is higher than usual (relative to the others), we short 5 shares of
          <span class="mathquill ud-math">
           stock_1
          </span>
          because we expect it should revert by decreasing relative to the others.
         </p>
         <p>
          Since
          <span class="mathquill ud-math">
           stock_2
          </span>
          is lower than normal, we long it by 3 shares, because we expect it to revert by increasing relative to the others.
         </p>
         <p>
          Since
          <span class="mathquill ud-math">
           stock_3
          </span>
          is lower than normal, so we also long it by 1 share but notice that
          <span class="mathquill ud-math">
           w_3
          </span>
          is a negative number (-0.1).  Whenever we see a negative weight, it means we change a buy to a sell, or change a sell to a buy.  So we long a -1 shares, which is actually shorting 1 share.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="13. Details of Johansen Test (optional).html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('12. 3 or more stocks (optional)')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
